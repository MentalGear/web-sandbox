<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./playground.css">
    <script type="module" src="./playground.ts"></script>

    <title>Playground</title>
</head>
<body>
    <h1>SafeSandbox Playground</h1>

    <div class="status-bar-header">
        <div class="global-controls">
            <span class="label" style="margin-bottom: 0;">Playground Preset:</span>
            <select id="presetSelect" onchange="loadPreset()">
                <option value="none">-- Select preset --</option>
                <!-- Dynamically populated -->
                <option value="custom">Custom Preset (auto-saves)</option>
            </select>
        </div>
        <div class="status-bar">
            <span id="sandbox-status">Sandbox: Disconnected</span>
        </div>
    </div>

    <div class="grid">
        <div class="card">
            <span class="label">Untrusted Source Code:</span>
            <textarea id="code" oninput="onCodeInput()" style="height: 250px;"> </textarea>

            <span class="label">Network Rules (JSON):</span>
            <textarea id="rulesEditor" onblur="onRulesBlur()" style="height: 150px; font-family: monospace; background: #1a1a1a;"> </textarea>

            <div id="rulesError" class="error-message"></div>

            <div class="controls">
                <button id="runButton" onclick="runCode()" style="background: var(--primary);" disabled>Run Code</button>
                <!-- <button id="proxyToggle" onclick="toggleProxy()" style="background: #444;">Proxy: OFF</button> -->
                <button onclick="clearLogs()" style="background: #666;">Clear Logs</button>
                <button onclick="resetSandbox()" style="background: #333;">Hard Reset</button>
            </div>
        </div>
        <div class="card">
            <span class="label">Sandbox View:</span>
            <lofi-sandbox id="sandbox"></lofi-sandbox>
        </div>
    </div>

    <div class="log-header">
        <h3>Host Message Logs</h3>
    </div>
    <div id="logs">Waiting for sandbox...</div>

</body>

</html>
